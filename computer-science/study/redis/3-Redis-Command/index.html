<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="alternate" type="application/rss+xml" title="鑫酱" href="https://allengx.gitee.io/rss.xml"><link rel="alternate" type="application/atom+xml" title="鑫酱" href="https://allengx.gitee.io/atom.xml"><link rel="alternate" type="application/json" title="鑫酱" href="https://allengx.gitee.io/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><link rel="canonical" href="https://allengx.gitee.io/computer-science/study/redis/3-Redis-Command/"><title>三、redis指令 - Redis - 学习笔记 - 计算机科学 | 个人博客 = 鑫酱 = 笔记本</title><meta name="generator" content="Hexo 5.1.1"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">三、redis指令</h1><div class="meta"><span class="item" title="创建时间：2020-04-12 20:46:25"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">发表于</span> <time itemprop="dateCreated datePublished" datetime="2020-04-12T20:46:25+08:00">2020-04-12</time> </span><span class="item" title="本文字数"><span class="icon"><i class="ic i-pen"></i> </span><span class="text">本文字数</span> <span>10k</span> <span class="text">字</span> </span><span class="item" title="阅读时长"><span class="icon"><i class="ic i-clock"></i> </span><span class="text">阅读时长</span> <span>9 分钟</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">个人博客</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><ul><li class="item" data-background-image="https://tva3.sinaimg.cn/large/6833939bly1gicitht3xtj20zk0m8k5v.jpg"></li><li class="item" data-background-image="https://tva3.sinaimg.cn/large/6833939bly1giclj9410cj20zk0m8h12.jpg"></li><li class="item" data-background-image="https://tva3.sinaimg.cn/large/6833939bly1gipeuv80yoj20zk0m8kjl.jpg"></li><li class="item" data-background-image="https://tva3.sinaimg.cn/large/6833939bly1giclize41wj20zk0m87gk.jpg"></li><li class="item" data-background-image="https://tva3.sinaimg.cn/large/6833939bly1gicit31ffoj20zk0m8naf.jpg"></li><li class="item" data-background-image="https://tva3.sinaimg.cn/large/6833939bly1gipevarprfj20zk0m8npd.jpg"></li></ul></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">首页</a></span><i class="ic i-angle-right"></i> <span itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/computer-science/" itemprop="item" rel="index" title="分类于 计算机科学"><span itemprop="name">计算机科学</span></a><meta itemprop="position" content="1"></span><i class="ic i-angle-right"></i> <span itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/computer-science/study/" itemprop="item" rel="index" title="分类于 学习笔记"><span itemprop="name">学习笔记</span></a><meta itemprop="position" content="2"></span><i class="ic i-angle-right"></i> <span class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/computer-science/study/redis/" itemprop="item" rel="index" title="分类于 Redis"><span itemprop="name">Redis</span></a><meta itemprop="position" content="3"></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://allengx.gitee.io/computer-science/study/redis/3-Redis-Command/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="鑫酱(●'◡'●)"><meta itemprop="description" content="笔记本, 整天摸鱼，却妄想拯救世界的技术宅"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="鑫酱"></span><div class="body md" itemprop="articleBody"><div class="note info"><p>以下为个人学习笔记整理</p></div><h1 id="redis-命令"><a class="anchor" href="#redis-命令">#</a> Redis 命令</h1><ul><li>字符串</li><li>列表</li><li>集合</li><li>散列</li><li>有序集合</li><li>排序</li><li>redis 基本事务</li><li>过期键的处理</li></ul><h2 id="字符串命令"><a class="anchor" href="#字符串命令">#</a> 字符串命令</h2><h3 id="自增自减命令操作incr-decr-incrby-decrby-incrbyfloat"><a class="anchor" href="#自增自减命令操作incr-decr-incrby-decrby-incrbyfloat">#</a> 自增自减命令操作：incr、decr、incrby、decrby、incrbyfloat</h3><table><thead><tr><th>命令</th><th>效果</th></tr></thead><tbody><tr><td>incr</td><td>incr key-name—— 键对应的值 + 1</td></tr><tr><td>decr</td><td>decr key-name—— 键对应的值 - 1</td></tr><tr><td>incrby</td><td>incrby key-name amount—— 键对应的值 + amount</td></tr><tr><td>decrby</td><td>decrby key-name amount—— 键对应的值 - amount</td></tr><tr><td>incrbyfloat</td><td>incrbyfloat key-name amount—— 键对应的值 + 浮点数 amount</td></tr></tbody></table><figure class="highlight python"><figcaption data-lang="python"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> redis</pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre>conn <span class="token operator">=</span> redis<span class="token punctuation">.</span>Redis<span class="token punctuation">(</span>decode_responses<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"key1"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 得到 key 为 key1 的对象值，有返回值没有返回 None</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>incr<span class="token punctuation">(</span><span class="token string">"key1"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 对 key1 对应的值进行 + 1 操作，如果为 None 则变成 1</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>incr<span class="token punctuation">(</span><span class="token string">"key1"</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 对 key1 对应的值进行 + 15 操作</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>decr<span class="token punctuation">(</span><span class="token string">"key1"</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 对 key1 对应的值进行 - 5 操作</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"key1"</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">(</span><span class="token string">"key1"</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 设置 key1 对应的值</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>incr<span class="token punctuation">(</span><span class="token string">"key1"</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr></table></figure><h3 id="字符串读取写入操作-append-getrange-setrange-getbit-setbit-bitcount-bitop"><a class="anchor" href="#字符串读取写入操作-append-getrange-setrange-getbit-setbit-bitcount-bitop">#</a> 字符串读取写入操作: append、getrange、setrange、getbit、setbit、bitcount、bitop</h3><table><thead><tr><th>命令</th><th>效果</th></tr></thead><tbody><tr><td>append</td><td>append key-name value—— 将 value 追加到 key-name 原来值得末尾</td></tr><tr><td>getrange</td><td>getrange key-name start end—— 获取从 start 到 end 偏移量的子串</td></tr><tr><td>setrange</td><td>setrange key-name offset value—— 把偏移量之后的字符设置为 value</td></tr><tr><td>getbit</td><td>getbit key-name offset—— 将字符串看成二级制，并返回偏移量的二进制值</td></tr><tr><td>setbit</td><td>setbit key-name offset value—— 将字符串看成二级制，并修改偏移量的二进制值为 value</td></tr></tbody><tbody><tr><td>bitcount</td><td>bitcount key-name [start end]—— 将字符串看成二级制，统计 start 到 end 内 1 的数量</td></tr><tr><td>bitop</td><td>bitop operation dest-key key-name [key-name...]—— 对多个二进制包进行（并 / 或 / 异或 / 非）等运算操作，并把结果保存着 dest-key 中</td></tr></tbody></table><figure class="highlight python"><figcaption data-lang="python"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">"new-string-key"</span><span class="token punctuation">,</span><span class="token string">"hello "</span><span class="token punctuation">)</span><span class="token punctuation">)</span>   <span class="token comment"># 加入 'hello ' 字符串 到末尾</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">"new-string-key"</span><span class="token punctuation">,</span><span class="token string">"world!"</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>substr<span class="token punctuation">(</span><span class="token string">"new-string-key"</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token comment"># 读取 range [3:7] 左右都为闭区间</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>setrange<span class="token punctuation">(</span><span class="token string">"new-string-key"</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">'H'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment"># 第 0 个 字符设置为 H</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>setrange<span class="token punctuation">(</span><span class="token string">"new-string-key"</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token string">'W'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment"># 第 6 个 字符设置为 W</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"new-string-key"</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>setrange<span class="token punctuation">(</span><span class="token string">"new-string-key"</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token string">", how are you?"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 从第 11 个开始插入 ", how are you?"</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"new-string-key"</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>setbit<span class="token punctuation">(</span><span class="token string">"another-key"</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>       <span class="token comment"># 设置第 2 个二进制对象为 1</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>setbit<span class="token punctuation">(</span><span class="token string">"another-key"</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>       <span class="token comment"># 设置第 7 个二进制对象为 1</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token comment"># 0 1 2 3 4 5 6 7    # 0 1 2 3 4 5 6 7</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token comment"># 0 0 0 0 0 0 0 0  =>  0 0 1 0 0 0 0 1  => 33 => '!'</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"another-key"</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr></table></figure><h2 id="列表命令"><a class="anchor" href="#列表命令">#</a> 列表命令</h2><h3 id="列表常用操作rpush-lpush-rpop-lpop-lindex-lrange-ltrim"><a class="anchor" href="#列表常用操作rpush-lpush-rpop-lpop-lindex-lrange-ltrim">#</a> 列表常用操作:rpush、lpush、rpop、lpop、lindex、lrange、ltrim</h3><table><thead><tr><th>命令</th><th>效果</th></tr></thead><tbody><tr><td>rpush</td><td>rpush key-name value [value...]—— 将多个元素加入列表右端</td></tr><tr><td>lpush</td><td>lpush key-name value [value...]—— 将多个元素加入列表左端</td></tr><tr><td>rpop</td><td>rpop key-name—— 移除并返回右端元素</td></tr><tr><td>lpop</td><td>lpop key-name—— 移除并返回左端元素</td></tr><tr><td>lindex</td><td>lindex key-name offset—— 返回偏移量的元素</td></tr><tr><td>lrange</td><td>lrange key-name start end—— 返回 start 到 end 范围的元素，左右都是闭区间</td></tr><tr><td>ltrim</td><td>ltrim key-name start end—— 只保留 start 到 end 范围的元素，左右都是闭区间</td></tr></tbody></table><figure class="highlight python"><figcaption data-lang="python"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> redis</pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre>conn <span class="token operator">=</span> redis<span class="token punctuation">.</span>Redis<span class="token punctuation">(</span>decode_responses<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>rpush<span class="token punctuation">(</span><span class="token string">"list-key"</span><span class="token punctuation">,</span> <span class="token string">"last"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 向后插入</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>lpush<span class="token punctuation">(</span><span class="token string">"list-key"</span><span class="token punctuation">,</span> <span class="token string">"first"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 向前插入</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>rpush<span class="token punctuation">(</span><span class="token string">"list-key"</span><span class="token punctuation">,</span> <span class="token string">"new last"</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>lrange<span class="token punctuation">(</span><span class="token string">"list-key"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 从前往后依次输出</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>lpop<span class="token punctuation">(</span><span class="token string">"list-key"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment"># 从前弹出</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>lpop<span class="token punctuation">(</span><span class="token string">"list-key"</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>lrange<span class="token punctuation">(</span><span class="token string">"list-key"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>rpush<span class="token punctuation">(</span><span class="token string">"list-key"</span><span class="token punctuation">,</span> <span class="token string">"a"</span><span class="token punctuation">,</span><span class="token string">"b"</span><span class="token punctuation">,</span><span class="token string">"c"</span><span class="token punctuation">,</span><span class="token string">"d"</span><span class="token punctuation">,</span><span class="token string">"e"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 向后插入多个</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>lrange<span class="token punctuation">(</span><span class="token string">"list-key"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>ltrim<span class="token punctuation">(</span><span class="token string">"list-key"</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment"># 保留 [2:-1] 区间内的值</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>lrange<span class="token punctuation">(</span><span class="token string">"list-key"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr></table></figure><h3 id="阻塞式列表指令原子操作blpop-brpop-rpoplpush-brpoplpush"><a class="anchor" href="#阻塞式列表指令原子操作blpop-brpop-rpoplpush-brpoplpush">#</a> 阻塞式列表指令（原子操作）:blpop、brpop、rpoplpush、brpoplpush</h3><table><thead><tr><th>命令</th><th>效果</th></tr></thead><tbody><tr><td>blpop</td><td>blpop key-name [key-name...] timeout—— 从第一个非空列表弹出最左元素，或者 timeout 时间后自动结束等待</td></tr><tr><td>brpop</td><td>brpop key-name [key-name...] timeout—— 从第一个非空列表弹出最右元素，或者 timeout 时间后自动结束等待</td></tr><tr><td>rpoplpush</td><td>rpoplpush source-key dest-key—— 从 source-key 弹出最右元素加入 dest-key 最左端，并返回</td></tr><tr><td>brpoplpush</td><td>brpoplpush source-key dest-key timeout—— 从 source-key 弹出最右元素加入 dest-key 最左端，并返回，或者 timeout 时间后自动结束等待</td></tr></tbody></table><figure class="highlight python"><figcaption data-lang="python"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>brpoplpush<span class="token punctuation">(</span><span class="token string">"list"</span><span class="token punctuation">,</span><span class="token string">"list2"</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment"># 当 list 没有可弹出的元素时，程序会在一段时间内阻塞，来等待可弹出元素出现，否则一段时间后返回 None</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>rpush<span class="token punctuation">(</span><span class="token string">"list"</span><span class="token punctuation">,</span><span class="token string">"item1"</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>rpush<span class="token punctuation">(</span><span class="token string">"list"</span><span class="token punctuation">,</span><span class="token string">"item2"</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>rpush<span class="token punctuation">(</span><span class="token string">"list2"</span><span class="token punctuation">,</span><span class="token string">"item3"</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>brpoplpush<span class="token punctuation">(</span><span class="token string">"list"</span><span class="token punctuation">,</span><span class="token string">"list2"</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># 将 list 最后边的元素放入 list2 的最前边</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>lrange<span class="token punctuation">(</span><span class="token string">"list2"</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>blpop<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"list5"</span><span class="token punctuation">,</span><span class="token string">"list4"</span><span class="token punctuation">,</span><span class="token string">"list3"</span><span class="token punctuation">,</span><span class="token string">"list2"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 从左到右检查列表内的 list，并对最先遇到的不为空的 list 执行左弹出操作</span></pre></td></tr></table></figure><h2 id="集合命令"><a class="anchor" href="#集合命令">#</a> 集合命令</h2><h3 id="集合常用操作指令sadd-srem-sismember-scard-smembers-srandmember-spop-smove"><a class="anchor" href="#集合常用操作指令sadd-srem-sismember-scard-smembers-srandmember-spop-smove">#</a> 集合常用操作指令:sadd、srem、sismember、scard、smembers、srandmember、spop、smove</h3><table><thead><tr><th>命令</th><th>效果</th></tr></thead><tbody><tr><td>sadd</td><td>sadd key-name item [item...]—— 将多个元素加入集合，返回成功加入的数量</td></tr><tr><td>srem</td><td>srem key-name item [item...]—— 从集合中删除多个元素，返回成功删除数量</td></tr><tr><td>sismember</td><td>sismember key-name item—— 判断 item 是否在集合内</td></tr><tr><td>scard</td><td>scard key-name—— 返回集合元素数量</td></tr><tr><td>smembers</td><td>smembers key-name —— 返回集合所有元素</td></tr><tr><td>srandmember</td><td>srandmember key-name [count]—— 随机返回 count 个元素 count 为负值时可能返回重复元素</td></tr><tr><td>spop</td><td>spop key-name—— 随机移除一个元素，并返回被移除元素</td></tr><tr><td>smove</td><td>smove source-key dest-key item—— 从 source-key 中移除 item 加入 dest-key 中移除失败返回 0 否则返回 1</td></tr></tbody></table><figure class="highlight python"><figcaption data-lang="python"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>sadd<span class="token punctuation">(</span><span class="token string">"set-key"</span><span class="token punctuation">,</span> <span class="token string">"a"</span><span class="token punctuation">,</span> <span class="token string">"b"</span><span class="token punctuation">,</span> <span class="token string">"c"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 把元素加入集合，并返回加入的数量</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>srem<span class="token punctuation">(</span><span class="token string">"set-key"</span><span class="token punctuation">,</span> <span class="token string">"c"</span><span class="token punctuation">,</span> <span class="token string">"d"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 移除集合中的某些元素 成功时 True 失败时 False</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>srem<span class="token punctuation">(</span><span class="token string">"set-key"</span><span class="token punctuation">,</span> <span class="token string">"c"</span><span class="token punctuation">,</span> <span class="token string">"d"</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>scard<span class="token punctuation">(</span><span class="token string">"set-key"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 查看集合中元素数量</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>smembers<span class="token punctuation">(</span><span class="token string">"set-key"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 输出集合中全部元素</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>smove<span class="token punctuation">(</span><span class="token string">"set-key"</span><span class="token punctuation">,</span> <span class="token string">"set-key2"</span><span class="token punctuation">,</span> <span class="token string">"a"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 将 集合 set-key 中的 a 移至 se-key2 集合中 如果 a 不在 set-key 则返回 False</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>smove<span class="token punctuation">(</span><span class="token string">"set-key"</span><span class="token punctuation">,</span> <span class="token string">"set-key2"</span><span class="token punctuation">,</span> <span class="token string">"c"</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>smembers<span class="token punctuation">(</span><span class="token string">"set-key2"</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr></table></figure><h3 id="集合之间的常用操作指令sdiff-sdiffstore-sinter-sinterstore-sunion-sunionstore"><a class="anchor" href="#集合之间的常用操作指令sdiff-sdiffstore-sinter-sinterstore-sunion-sunionstore">#</a> 集合之间的常用操作指令:sdiff、sdiffstore、sinter、sinterstore、sunion、sunionstore</h3><table><thead><tr><th>命令</th><th>效果</th></tr></thead><tbody><tr><td>sdiff</td><td>sdiff key-name [key-name...]—— 返回在第一个集合不在其他的集合内的元素</td></tr><tr><td>sdiffstore</td><td>sdiffstore dest-key key-name [key-name...]—— 将在第一个集合不在其他的集合内的元素存储到 dest-key 里</td></tr><tr><td>sinter</td><td>sinter key-name [key-name...]—— 返回存在于所有集合的元素</td></tr><tr><td>sinterstore</td><td>sinterstore dest-key key-name [key-name...]—— 将存在于所有集合的元素存储在 dest-key 中</td></tr><tr><td>sunion</td><td>sunion key-name [key-name...]—— 返回至少存在于一个集合的所有元素</td></tr><tr><td>sunionstore</td><td>sunionstore dest-key key-name [key-name...]—— 返回存在于至少一个集合的所有元素到 dest-key 中</td></tr></tbody></table><figure class="highlight python"><figcaption data-lang="python"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>sadd<span class="token punctuation">(</span><span class="token string">"skey1"</span><span class="token punctuation">,</span> <span class="token string">"a"</span><span class="token punctuation">,</span> <span class="token string">"b"</span><span class="token punctuation">,</span> <span class="token string">"c"</span><span class="token punctuation">,</span> <span class="token string">"d"</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>sadd<span class="token punctuation">(</span><span class="token string">"skey2"</span><span class="token punctuation">,</span> <span class="token string">"c"</span><span class="token punctuation">,</span> <span class="token string">"d"</span><span class="token punctuation">,</span> <span class="token string">"e"</span><span class="token punctuation">,</span> <span class="token string">"f"</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>sdiff<span class="token punctuation">(</span><span class="token string">"skey1"</span><span class="token punctuation">,</span> <span class="token string">"skey2"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 两个集合做差运算</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>sinter<span class="token punctuation">(</span><span class="token string">"skey1"</span><span class="token punctuation">,</span> <span class="token string">"skey2"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 两个集合做交运算</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>sunion<span class="token punctuation">(</span><span class="token string">"skey1"</span><span class="token punctuation">,</span> <span class="token string">"skey2"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 两个集合做并运算</span></pre></td></tr></table></figure><h2 id="散列命令"><a class="anchor" href="#散列命令">#</a> 散列命令</h2><h3 id="散列常用操作指令-hmget-hmset-hdel-hlen"><a class="anchor" href="#散列常用操作指令-hmget-hmset-hdel-hlen">#</a> 散列常用操作指令: hmget、hmset、hdel、hlen</h3><table><thead><tr><th>命令</th><th>效果</th></tr></thead><tbody><tr><td>hmget</td><td>hmget key-name key [key...]—— 从散列里获取多个 key 的值</td></tr><tr><td>hmset</td><td>hmset key-name key value [key value...]—— 为散列设置多个 key value 值</td></tr><tr><td>hdel</td><td>hdel key-name key [key...]—— 删除散列多个 key 值并返回删除的数量</td></tr><tr><td>hlen</td><td>hlen key-name—— 散列键值对数量</td></tr></tbody></table><figure class="highlight python"><figcaption data-lang="python"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>hmset<span class="token punctuation">(</span><span class="token string">"hash-key"</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token string">"k1"</span><span class="token punctuation">:</span> <span class="token string">"v1"</span><span class="token punctuation">,</span> <span class="token string">"k2"</span><span class="token punctuation">:</span> <span class="token string">"v2"</span><span class="token punctuation">,</span> <span class="token string">"k3"</span><span class="token punctuation">:</span> <span class="token string">"v3"</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 加入 散列的 key 和 value</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>hmget<span class="token punctuation">(</span><span class="token string">"hash-key"</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">"k1"</span><span class="token punctuation">,</span> <span class="token string">"k3"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 得到 key list 对应的 value list</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>hlen<span class="token punctuation">(</span><span class="token string">"hash-key"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 得到 散列长度</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>hdel<span class="token punctuation">(</span><span class="token string">"hash-key"</span><span class="token punctuation">,</span> <span class="token string">"k2"</span><span class="token punctuation">,</span> <span class="token string">"k3"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 删除某些 key 返回 删除的 key 数量</span></pre></td></tr></table></figure><h3 id="散列高级操作指令-hexists-hkeys-hvals-hgetall-hincrby-hincrbyfloat"><a class="anchor" href="#散列高级操作指令-hexists-hkeys-hvals-hgetall-hincrby-hincrbyfloat">#</a> 散列高级操作指令: hexists、hkeys、hvals、hgetall、hincrby、hincrbyfloat</h3><table><thead><tr><th>命令</th><th>效果</th></tr></thead><tbody><tr><td>hexists</td><td>hexists key-name key—— 检查某 key 是否存在于散列中</td></tr><tr><td>hkeys</td><td>hkeys key-name—— 获取散列的所有键</td></tr><tr><td>hvals</td><td>hvals key-name—— 获取散列的所有值</td></tr><tr><td>hgetall</td><td>hgetall key-name—— 获取散列的所有键和值</td></tr><tr><td>hincrby</td><td>hincrby key-name key increment—— 将键存储的值加上 increment</td></tr><tr><td>hincrbyfloat</td><td>hincrbyfloat key-name key increment—— 将键存储的值加上浮点数 increment</td></tr></tbody></table><figure class="highlight python"><figcaption data-lang="python"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>hmset<span class="token punctuation">(</span><span class="token string">"hash-key2"</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token string">"short"</span><span class="token punctuation">:</span> <span class="token string">"hello"</span><span class="token punctuation">,</span> <span class="token string">"long"</span><span class="token punctuation">:</span> <span class="token number">1000</span> <span class="token operator">*</span> <span class="token string">"i"</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>hkeys<span class="token punctuation">(</span><span class="token string">"hash-key2"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 得到所有的 key</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>hexists<span class="token punctuation">(</span><span class="token string">"hash-key2"</span><span class="token punctuation">,</span> <span class="token string">"num"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 判断某些 key 是否存在</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>hexists<span class="token punctuation">(</span><span class="token string">"hash-key2"</span><span class="token punctuation">,</span> <span class="token string">"long"</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>hincrby<span class="token punctuation">(</span><span class="token string">"hash-key2"</span><span class="token punctuation">,</span> <span class="token string">"num"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 对某些 key 的值进行自增操作，如果没有对应的值则默认对 0 进行自增</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>hmget<span class="token punctuation">(</span><span class="token string">"hash-key2"</span><span class="token punctuation">,</span> <span class="token string">"num"</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr></table></figure><h2 id="有序集合"><a class="anchor" href="#有序集合">#</a> 有序集合</h2><h3 id="有序集合的常用操作zadd-zcard-zincrby-zscore-zrange-zcount-zrem-zrank"><a class="anchor" href="#有序集合的常用操作zadd-zcard-zincrby-zscore-zrange-zcount-zrem-zrank">#</a> 有序集合的常用操作：zadd、zcard、zincrby、zscore、zrange、zcount、zrem、zrank</h3><table><thead><tr><th>命令</th><th>效果</th></tr></thead><tbody><tr><td>zadd</td><td>zadd key-name map {key：value,...}—— 将带有分值的成员加入集合</td></tr><tr><td>zcard</td><td>zcard key-name—— 返回有序列表的成员数量</td></tr><tr><td>zincrby</td><td>key-name increment member—— 将 member 元素加上 increment</td></tr><tr><td>zscore</td><td>zscore key-name member—— 返回 member 元素的分值</td></tr><tr><td>zrange</td><td>zrange key-name start stop [withscores]—— 返回有序集合排名介于 start 和 stop 之间的成员，withscores 开启后分值也会一并返回</td></tr><tr><td>zcount</td><td>zcount key-name min max—— 返回介于 min 和 max 之间的成员数量</td></tr><tr><td>zrem</td><td>zrem key-name value [value...]—— 移除元素并返回移除数量</td></tr><tr><td>zrank</td><td>zrank key-name member—— 返回成员在有序集合中的排名</td></tr></tbody></table><figure class="highlight python"><figcaption data-lang="python"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> redis</pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre>conn <span class="token operator">=</span> redis<span class="token punctuation">.</span>Redis<span class="token punctuation">(</span>decode_responses<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>zadd<span class="token punctuation">(</span><span class="token string">"zset-key"</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token string">"A"</span><span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">"B"</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 向有序集合中加入元素</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>zcard<span class="token punctuation">(</span><span class="token string">"zset-key"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 有序集合的元素数量</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>zincrby<span class="token punctuation">(</span><span class="token string">"zset-key"</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">"A"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># A 元素的分值加 2</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>zscore<span class="token punctuation">(</span><span class="token string">"zset-key"</span><span class="token punctuation">,</span> <span class="token string">"A"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 查看 A 元素的分值</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>zrank<span class="token punctuation">(</span><span class="token string">"zset-key"</span><span class="token punctuation">,</span> <span class="token string">"B"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 查看 B 元素的排序（根据分值）排序从 0 开始</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>zcount<span class="token punctuation">(</span><span class="token string">"zset-key"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 分值为 0 - 5 的元素有多少个 左右都时是闭</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>zrem<span class="token punctuation">(</span><span class="token string">"zset-key"</span><span class="token punctuation">,</span> <span class="token string">'B'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 移除 B 元素</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>zrange<span class="token punctuation">(</span><span class="token string">"zset-key"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> withscores<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 输出全部有序集合的 元素及其分值</span></pre></td></tr></table></figure><h3 id="有序集合的高级操作zrevrnk-zrevrange-zrangebyscore-zrevrangebyscore-zremrangebyrank-zremrangebyscore-zinterstore-zunionstore"><a class="anchor" href="#有序集合的高级操作zrevrnk-zrevrange-zrangebyscore-zrevrangebyscore-zremrangebyrank-zremrangebyscore-zinterstore-zunionstore">#</a> 有序集合的高级操作：zrevrnk、zrevrange、zrangebyscore、zrevrangebyscore、zremrangebyrank、zremrangebyscore、zinterstore、zunionstore</h3><table><thead><tr><th>命令</th><th>效果</th></tr></thead><tbody><tr><td>zrevrank</td><td>zrevrank key-name value—— 返回元素的排名</td></tr><tr><td>zrevrange</td><td>zrevrange key-name start stop—— 返回排名范围内的元素</td></tr><tr><td>zrangebyscore</td><td>zrangebyscore key-name min max [withscores] [limit offset count]—— 返回有序列表中 min 到 max 的成员</td></tr><tr><td>zrevrangebyscore</td><td>zrevrangebyscore key-name min max [withscores] [limit offset count]—— 返回有序列表中 min 到 max 的成员，按照从大到小的顺序</td></tr><tr><td>zremrangebyrank</td><td>zremrangebyrank key-name start stop—— 移除介于 start 和 stop 之间的所有元素</td></tr><tr><td>zremrangebyscore</td><td>zremrangebyscore key-name min max—— 移除介于 min 和 max 之间的所有元素</td></tr><tr><td>zinterstore</td><td><code>zinterstore dest-key key-count key/[key...][None/weight/[weight...]][aggregate sum|min|max]</code> —— 对集合进行交集运算</td></tr><tr><td>zunionstore</td><td><code>zunionstore dest-key key-count key/[key...][None/weight/[weight...]][aggregate sum|min|max]</code> —— 对集合进行并集运算</td></tr></tbody></table><figure class="highlight python"><figcaption data-lang="python"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>zadd<span class="token punctuation">(</span><span class="token string">"zset-1"</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token string">"A"</span><span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">"B"</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">"C"</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 向有序集合中加入元素</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>zadd<span class="token punctuation">(</span><span class="token string">"zset-2"</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token string">"B"</span><span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">"C"</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">"D"</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 向有序集合中加入元素</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>zinterstore<span class="token punctuation">(</span><span class="token string">"zset-i"</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">"zset-1"</span><span class="token punctuation">,</span> <span class="token string">"zset-2"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 集合合并，保留相同元素，且分值叠加</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>zrange<span class="token punctuation">(</span><span class="token string">"zset-i"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> withscores<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>zunionstore<span class="token punctuation">(</span><span class="token string">"zset-j"</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">"zset-1"</span><span class="token punctuation">,</span> <span class="token string">"zset-2"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> aggregate<span class="token operator">=</span><span class="token string">'min'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># aggregate = min/max/sum 集合合并，并对相同元素 取小 / 取大 / 取和</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>zrange<span class="token punctuation">(</span><span class="token string">"zset-j"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> withscores<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>sadd<span class="token punctuation">(</span><span class="token string">"set-1"</span><span class="token punctuation">,</span> <span class="token string">"A"</span><span class="token punctuation">,</span> <span class="token string">"B"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 创建 集合（非有序集合）</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>zunionstore<span class="token punctuation">(</span><span class="token string">"zset-h"</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">"zset-1"</span><span class="token punctuation">,</span> <span class="token string">"zset-2"</span><span class="token punctuation">,</span> <span class="token string">"set-1"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 默认  aggregate = sum，集合也可以作为有序集合的合并对象</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>zrange<span class="token punctuation">(</span><span class="token string">"zset-h"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> withscores<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr></table></figure><h2 id="sort排序相关操作"><a class="anchor" href="#sort排序相关操作">#</a> sort 排序相关操作</h2><table><thead><tr><th>命令</th><th>作用</th></tr></thead><tbody><tr><td><code>sort</code></td><td><code>sort key-name [by pattern][limit offset count][get pattern [get pattern...]][asc\|desc][alpha][store desc-key]</code> —— 根据给定的选项，对输入列表、集合或者有序集合进行排序，然后返回或者存储排序结果</td></tr></tbody></table><figure class="highlight python"><figcaption data-lang="python"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> redis</pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre>conn <span class="token operator">=</span> redis<span class="token punctuation">.</span>Redis<span class="token punctuation">(</span>decode_responses<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre>conn<span class="token punctuation">.</span>rpush<span class="token punctuation">(</span><span class="token string">"sort1"</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">,</span> <span class="token number">77</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>sort<span class="token punctuation">(</span><span class="token string">"sort1"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 根据大小</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>sort<span class="token punctuation">(</span><span class="token string">"sort1"</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 根据字母顺序</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment">########## 权重 ##########</span></pre></td></tr><tr><td data-num="9"></td><td><pre>conn<span class="token punctuation">.</span>hset<span class="token punctuation">(</span><span class="token string">"a-1"</span><span class="token punctuation">,</span> <span class="token string">"weight"</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre>conn<span class="token punctuation">.</span>hset<span class="token punctuation">(</span><span class="token string">"a-3"</span><span class="token punctuation">,</span> <span class="token string">"weight"</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="11"></td><td><pre>conn<span class="token punctuation">.</span>hset<span class="token punctuation">(</span><span class="token string">"a-5"</span><span class="token punctuation">,</span> <span class="token string">"weight"</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="12"></td><td><pre>conn<span class="token punctuation">.</span>hset<span class="token punctuation">(</span><span class="token string">"a-11"</span><span class="token punctuation">,</span> <span class="token string">"weight"</span><span class="token punctuation">,</span> <span class="token number">44</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="13"></td><td><pre>conn<span class="token punctuation">.</span>hset<span class="token punctuation">(</span><span class="token string">"a-90"</span><span class="token punctuation">,</span> <span class="token string">"weight"</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="14"></td><td><pre>conn<span class="token punctuation">.</span>hset<span class="token punctuation">(</span><span class="token string">"a-77"</span><span class="token punctuation">,</span> <span class="token string">"weight"</span><span class="token punctuation">,</span> <span class="token number">66</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token comment">########## 权重 ##########</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>sort<span class="token punctuation">(</span><span class="token string">"sort1"</span><span class="token punctuation">,</span> by<span class="token operator">=</span><span class="token string">"a-*->weight"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 根据上面的权重排序  </span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>sort<span class="token punctuation">(</span><span class="token string">"sort1"</span><span class="token punctuation">,</span> by<span class="token operator">=</span><span class="token string">"a-*->weight"</span><span class="token punctuation">,</span> get<span class="token operator">=</span><span class="token string">"a-*->weight"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 把权重作为返回值</span></pre></td></tr><tr><td data-num="18"></td><td><pre></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token punctuation">[</span><span class="token string">'1'</span><span class="token punctuation">,</span> <span class="token string">'3'</span><span class="token punctuation">,</span> <span class="token string">'5'</span><span class="token punctuation">,</span> <span class="token string">'11'</span><span class="token punctuation">,</span> <span class="token string">'77'</span><span class="token punctuation">,</span> <span class="token string">'90'</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token punctuation">[</span><span class="token string">'1'</span><span class="token punctuation">,</span> <span class="token string">'11'</span><span class="token punctuation">,</span> <span class="token string">'3'</span><span class="token punctuation">,</span> <span class="token string">'5'</span><span class="token punctuation">,</span> <span class="token string">'77'</span><span class="token punctuation">,</span> <span class="token string">'90'</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token punctuation">[</span><span class="token string">'1'</span><span class="token punctuation">,</span> <span class="token string">'3'</span><span class="token punctuation">,</span> <span class="token string">'5'</span><span class="token punctuation">,</span> <span class="token string">'90'</span><span class="token punctuation">,</span> <span class="token string">'11'</span><span class="token punctuation">,</span> <span class="token string">'77'</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token punctuation">[</span><span class="token string">'1'</span><span class="token punctuation">,</span> <span class="token string">'2'</span><span class="token punctuation">,</span> <span class="token string">'3'</span><span class="token punctuation">,</span> <span class="token string">'5'</span><span class="token punctuation">,</span> <span class="token string">'44'</span><span class="token punctuation">,</span> <span class="token string">'66'</span><span class="token punctuation">]</span></pre></td></tr></table></figure><h2 id="redis基本事务"><a class="anchor" href="#redis基本事务">#</a> redis 基本事务</h2><h3 id="基本事务指令watch-multi-exec-unwatch-discard"><a class="anchor" href="#基本事务指令watch-multi-exec-unwatch-discard">#</a> 基本事务指令：watch、multi、exec、unwatch、discard</h3><figure class="highlight python"><figcaption data-lang="python"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># 非原子操作导致读写混乱</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span> time</pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">import</span> threading</pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre>conn <span class="token operator">=</span> redis<span class="token punctuation">.</span>Redis<span class="token punctuation">(</span>decode_responses<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">def</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>incr<span class="token punctuation">(</span><span class="token string">"test--1:"</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">.1</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>incr<span class="token punctuation">(</span><span class="token string">"test--1:"</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token keyword">if</span> <span class="token number">1</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        threading<span class="token punctuation">.</span>Thread<span class="token punctuation">(</span>target<span class="token operator">=</span>test<span class="token punctuation">)</span><span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">.5</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    </pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token number">1</span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token number">2</span></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token number">3</span></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token number">2</span></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token number">1</span></pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token number">0</span></pre></td></tr><tr><td data-num="26"></td><td><pre></pre></td></tr><tr><td data-num="27"></td><td><pre><span class="token comment"># 通过事务的消息队列实现原子操作</span></pre></td></tr><tr><td data-num="28"></td><td><pre><span class="token keyword">def</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="29"></td><td><pre>    pipline <span class="token operator">=</span> conn<span class="token punctuation">.</span>pipeline<span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="30"></td><td><pre>    pipline<span class="token punctuation">.</span>incr<span class="token punctuation">(</span><span class="token string">"test--1:"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="31"></td><td><pre>    time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">.1</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="32"></td><td><pre>    pipline<span class="token punctuation">.</span>incr<span class="token punctuation">(</span><span class="token string">"test--1:"</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="33"></td><td><pre>    result <span class="token operator">=</span> pipline<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="34"></td><td><pre>    <span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="35"></td><td><pre>    <span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="36"></td><td><pre></pre></td></tr><tr><td data-num="37"></td><td><pre><span class="token keyword">if</span> <span class="token number">1</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="38"></td><td><pre>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="39"></td><td><pre>        threading<span class="token punctuation">.</span>Thread<span class="token punctuation">(</span>target<span class="token operator">=</span>test<span class="token punctuation">)</span><span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="40"></td><td><pre>    time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">.5</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="41"></td><td><pre>    </pre></td></tr><tr><td data-num="42"></td><td><pre><span class="token number">1</span></pre></td></tr><tr><td data-num="43"></td><td><pre><span class="token number">0</span></pre></td></tr><tr><td data-num="44"></td><td><pre><span class="token number">1</span></pre></td></tr><tr><td data-num="45"></td><td><pre><span class="token number">0</span></pre></td></tr><tr><td data-num="46"></td><td><pre><span class="token number">1</span></pre></td></tr><tr><td data-num="47"></td><td><pre><span class="token number">0</span></pre></td></tr></table></figure><h2 id="过期键的处理"><a class="anchor" href="#过期键的处理">#</a> 过期键的处理</h2><h3 id="常用命令persist-ttl-expire-expireat-pttl-pexpire-pexpireat"><a class="anchor" href="#常用命令persist-ttl-expire-expireat-pttl-pexpire-pexpireat">#</a> 常用命令:persist、ttl、expire、expireat、pttl、pexpire、pexpireat</h3><table><thead><tr><th>命令</th><th>作用</th></tr></thead><tbody><tr><td>persist</td><td>persist key-name—— 移除键的过期时间</td></tr><tr><td>ttl</td><td>ttl key-name—— 查看键的过期时间</td></tr><tr><td>expire</td><td>expire key-name time—— 设置键的过期时间</td></tr><tr><td>expireat</td><td>expireat key-name timesetamp—— 将给定的过期时间修改为 unix 时间戳</td></tr><tr><td>pttl</td><td>pttl key-name—— 查看距离过期还有多久</td></tr><tr><td>pexpire</td><td>pexpire key-name time 让键在给定的多少<strong>毫秒</strong>后过期</td></tr><tr><td>pexpireat</td><td>pexpireat key-name time—— 将一个毫秒级的 unix 时间戳设置为键的过期时间</td></tr></tbody></table><figure class="highlight python"><figcaption data-lang="python"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> redis</pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">import</span> time</pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre>conn <span class="token operator">=</span> redis<span class="token punctuation">.</span>Redis<span class="token punctuation">(</span>decode_responses<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">(</span><span class="token string">"keys"</span><span class="token punctuation">,</span> <span class="token string">"value"</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"keys"</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>expire<span class="token punctuation">(</span><span class="token string">"keys"</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 设置该键的时间限制 2 秒后过期</span></pre></td></tr><tr><td data-num="9"></td><td><pre>time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"keys"</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">(</span><span class="token string">"keys"</span><span class="token punctuation">,</span> <span class="token string">"value2"</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>expire<span class="token punctuation">(</span><span class="token string">"keys"</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>conn<span class="token punctuation">.</span>ttl<span class="token punctuation">(</span><span class="token string">"keys"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 查看还要多少秒过期</span></pre></td></tr></table></figure></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">更新于</span> <time title="修改时间：2020-10-26 10:33:46" itemprop="dateModified" datetime="2020-10-26T10:33:46+08:00">2020-10-26</time> </span><span id="computer-science/study/redis/3-Redis-Command/" class="item leancloud_visitors" data-flag-title="三、redis指令" title="阅读次数"><span class="icon"><i class="ic i-eye"></i> </span><span class="text">阅读次数</span> <span class="leancloud-visitors-count"></span> <span class="text">次</span></span></div><div class="reward"><button><i class="ic i-heartbeat"></i> 充电</button><p>请我[恰饭]~(￣▽￣)~*</p><div id="qr"><div><img data-src="/images/wechatpay.png" alt="鑫酱(●'◡'●) 微信支付"><p>微信支付</p></div><div><img data-src="/images/alipay.png" alt="鑫酱(●'◡'●) 支付宝"><p>支付宝</p></div></div></div><div id="copyright"><ul><li class="author"><strong>本文作者： </strong>鑫酱(●'◡'●) <i class="ic i-at"><em>@</em></i>鑫酱</li><li class="link"><strong>本文链接：</strong> <a href="https://allengx.gitee.io/computer-science/study/redis/3-Redis-Command/" title="三、redis指令">https://allengx.gitee.io/computer-science/study/redis/3-Redis-Command/</a></li><li class="license"><strong>版权声明： </strong>本站所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/computer-science/study/redis/1-Redis-Introduction/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;tva3.sinaimg.cn&#x2F;mw690&#x2F;6833939bly1giciryrr3rj20zk0m8nhk.jpg" title="一、redis新手入门"><span class="type">上一篇</span> <span class="category"><i class="ic i-flag"></i> Redis</span><h3>一、redis新手入门</h3></a></div><div class="item right"><a href="/computer-science/study/python/Python2-Yield-Async/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;tva3.sinaimg.cn&#x2F;mw690&#x2F;6833939bly1giclgrvbd6j20zk0m8qv5.jpg" title="python2解决异步协程问题"><span class="type">下一篇</span> <span class="category"><i class="ic i-flag"></i> Python</span><h3>python2解决异步协程问题</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#redis-%E5%91%BD%E4%BB%A4"><span class="toc-number">1.</span> <span class="toc-text">Redis 命令</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%91%BD%E4%BB%A4"><span class="toc-number">1.1.</span> <span class="toc-text">字符串命令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%A2%9E%E8%87%AA%E5%87%8F%E5%91%BD%E4%BB%A4%E6%93%8D%E4%BD%9Cincr-decr-incrby-decrby-incrbyfloat"><span class="toc-number">1.1.1.</span> <span class="toc-text">自增自减命令操作：incr、decr、incrby、decrby、incrbyfloat</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%AF%BB%E5%8F%96%E5%86%99%E5%85%A5%E6%93%8D%E4%BD%9C-append-getrange-setrange-getbit-setbit-bitcount-bitop"><span class="toc-number">1.1.2.</span> <span class="toc-text">字符串读取写入操作: append、getrange、setrange、getbit、setbit、bitcount、bitop</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%97%E8%A1%A8%E5%91%BD%E4%BB%A4"><span class="toc-number">1.2.</span> <span class="toc-text">列表命令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%97%E8%A1%A8%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9Crpush-lpush-rpop-lpop-lindex-lrange-ltrim"><span class="toc-number">1.2.1.</span> <span class="toc-text">列表常用操作:rpush、lpush、rpop、lpop、lindex、lrange、ltrim</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%98%BB%E5%A1%9E%E5%BC%8F%E5%88%97%E8%A1%A8%E6%8C%87%E4%BB%A4%E5%8E%9F%E5%AD%90%E6%93%8D%E4%BD%9Cblpop-brpop-rpoplpush-brpoplpush"><span class="toc-number">1.2.2.</span> <span class="toc-text">阻塞式列表指令（原子操作）:blpop、brpop、rpoplpush、brpoplpush</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9B%86%E5%90%88%E5%91%BD%E4%BB%A4"><span class="toc-number">1.3.</span> <span class="toc-text">集合命令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9B%86%E5%90%88%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C%E6%8C%87%E4%BB%A4sadd-srem-sismember-scard-smembers-srandmember-spop-smove"><span class="toc-number">1.3.1.</span> <span class="toc-text">集合常用操作指令:sadd、srem、sismember、scard、smembers、srandmember、spop、smove</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9B%86%E5%90%88%E4%B9%8B%E9%97%B4%E7%9A%84%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C%E6%8C%87%E4%BB%A4sdiff-sdiffstore-sinter-sinterstore-sunion-sunionstore"><span class="toc-number">1.3.2.</span> <span class="toc-text">集合之间的常用操作指令:sdiff、sdiffstore、sinter、sinterstore、sunion、sunionstore</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%A3%E5%88%97%E5%91%BD%E4%BB%A4"><span class="toc-number">1.4.</span> <span class="toc-text">散列命令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%A3%E5%88%97%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C%E6%8C%87%E4%BB%A4-hmget-hmset-hdel-hlen"><span class="toc-number">1.4.1.</span> <span class="toc-text">散列常用操作指令: hmget、hmset、hdel、hlen</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%A3%E5%88%97%E9%AB%98%E7%BA%A7%E6%93%8D%E4%BD%9C%E6%8C%87%E4%BB%A4-hexists-hkeys-hvals-hgetall-hincrby-hincrbyfloat"><span class="toc-number">1.4.2.</span> <span class="toc-text">散列高级操作指令: hexists、hkeys、hvals、hgetall、hincrby、hincrbyfloat</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%89%E5%BA%8F%E9%9B%86%E5%90%88"><span class="toc-number">1.5.</span> <span class="toc-text">有序集合</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%89%E5%BA%8F%E9%9B%86%E5%90%88%E7%9A%84%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9Czadd-zcard-zincrby-zscore-zrange-zcount-zrem-zrank"><span class="toc-number">1.5.1.</span> <span class="toc-text">有序集合的常用操作：zadd、zcard、zincrby、zscore、zrange、zcount、zrem、zrank</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%89%E5%BA%8F%E9%9B%86%E5%90%88%E7%9A%84%E9%AB%98%E7%BA%A7%E6%93%8D%E4%BD%9Czrevrnk-zrevrange-zrangebyscore-zrevrangebyscore-zremrangebyrank-zremrangebyscore-zinterstore-zunionstore"><span class="toc-number">1.5.2.</span> <span class="toc-text">有序集合的高级操作：zrevrnk、zrevrange、zrangebyscore、zrevrangebyscore、zremrangebyrank、zremrangebyscore、zinterstore、zunionstore</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#sort%E6%8E%92%E5%BA%8F%E7%9B%B8%E5%85%B3%E6%93%8D%E4%BD%9C"><span class="toc-number">1.6.</span> <span class="toc-text">sort 排序相关操作</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#redis%E5%9F%BA%E6%9C%AC%E4%BA%8B%E5%8A%A1"><span class="toc-number">1.7.</span> <span class="toc-text">redis 基本事务</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E4%BA%8B%E5%8A%A1%E6%8C%87%E4%BB%A4watch-multi-exec-unwatch-discard"><span class="toc-number">1.7.1.</span> <span class="toc-text">基本事务指令：watch、multi、exec、unwatch、discard</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%87%E6%9C%9F%E9%94%AE%E7%9A%84%E5%A4%84%E7%90%86"><span class="toc-number">1.8.</span> <span class="toc-text">过期键的处理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4persist-ttl-expire-expireat-pttl-pexpire-pexpireat"><span class="toc-number">1.8.1.</span> <span class="toc-text">常用命令:persist、ttl、expire、expireat、pttl、pexpire、pexpireat</span></a></li></ol></li></ol></li></ol></div><div class="related panel pjax" data-title="系列文章"><ul><li class="active"><a href="/computer-science/study/redis/3-Redis-Command/" rel="bookmark" title="三、redis指令">三、redis指令</a></li><li><a href="/computer-science/study/redis/1-Redis-Introduction/" rel="bookmark" title="一、redis新手入门">一、redis新手入门</a></li><li><a href="/computer-science/study/redis/2-Redis-Distribute-Subscribe/" rel="bookmark" title="二、redis发布订阅">二、redis发布订阅</a></li><li><a href="/computer-science/study/redis/5-Redis-Building-Program/" rel="bookmark" title="五、使用redis构建支持程序">五、使用redis构建支持程序</a></li><li><a href="/computer-science/study/redis/4-Redis-Data-Security-And-Performance/" rel="bookmark" title="四、redis数据安全及性能保障">四、redis数据安全及性能保障</a></li></ul></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="鑫酱(●'◡'●)" data-src="/images/avatar.jpg"><p class="name" itemprop="name">鑫酱(●'◡'●)</p><div class="description" itemprop="description">整天摸鱼，却妄想拯救世界的技术宅</div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">43</span> <span class="name">文章</span></a></div><div class="item categories"><a href="/categories/"><span class="count">16</span> <span class="name">分类</span></a></div><div class="item tags"><a href="/tags/"><span class="count">11</span> <span class="name">标签</span></a></div></nav><div class="social"><span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL0FsbGVuR1g=" title="https:&#x2F;&#x2F;github.com&#x2F;AllenGX"><i class="ic i-github"></i></span> <span class="exturl item music" data-url="aHR0cHM6Ly9tdXNpYy4xNjMuY29tLyMvdXNlci9ob21lP2lkPTgwNTM4MjQy" title="https:&#x2F;&#x2F;music.163.com&#x2F;#&#x2F;user&#x2F;home?id&#x3D;80538242"><i class="ic i-cloud-music"></i></span> <span class="exturl item email" data-url="bWFpbHRvOjE0MTM5MDcxNTNAcXEuY29t" title="mailto:1413907153@qq.com"><i class="ic i-envelope"></i></span></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item"><a href="/about/" rel="section"><i class="ic i-user"></i>关于</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>文章</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul></li><li class="item"><a href="/friends/" rel="section"><i class="ic i-heart"></i>好友</a></li><li class="item"><a href="/links/" rel="section"><i class="ic i-magic"></i>网址</a></li><li class="item"><a href="/travellings/" rel="section"><i class="ic i-paper-plane"></i>传送门</a></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/computer-science/study/redis/1-Redis-Introduction/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/computer-science/study/python/Python2-Yield-Async/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>随机文章</h2><ul><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/study/" title="分类于 学习笔记">学习笔记</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/study/Python%E3%80%8C%E5%B7%A5%E5%8C%A0%E3%80%8D/" title="分类于 Python「工匠」">Python「工匠」</a></div><span><a href="/computer-science/study/Python%E3%80%8C%E5%B7%A5%E5%8C%A0%E3%80%8D/%E5%85%AD%E3%80%81%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/" title="六、异常处理">六、异常处理</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/study/" title="分类于 学习笔记">学习笔记</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/study/python/" title="分类于 Python">Python</a></div><span><a href="/computer-science/study/python/Python-Build-In/" title="python内建函数">python内建函数</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/study/" title="分类于 学习笔记">学习笔记</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/study/micro-service/" title="分类于 微服务">微服务</a></div><span><a href="/computer-science/study/micro-service/Mro-Service-Introduction/" title="微服务概述和设计">微服务概述和设计</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/study/" title="分类于 学习笔记">学习笔记</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/study/python/" title="分类于 Python">Python</a></div><span><a href="/computer-science/study/python/Python2-Source-Code/" title="python2源码剖析">python2源码剖析</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/study/" title="分类于 学习笔记">学习笔记</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/study/opengl/" title="分类于 OpenGL">OpenGL</a></div><span><a href="/computer-science/study/opengl/2-OpenGL-Load-Model/" title="三、OpenGL模型加载">三、OpenGL模型加载</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/study/" title="分类于 学习笔记">学习笔记</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/study/Python%E3%80%8C%E5%B7%A5%E5%8C%A0%E3%80%8D/" title="分类于 Python「工匠」">Python「工匠」</a></div><span><a href="/computer-science/study/Python%E3%80%8C%E5%B7%A5%E5%8C%A0%E3%80%8D/%E5%8D%81%E3%80%81%E5%81%9A%E4%B8%80%E4%B8%AA%E7%B2%BE%E9%80%9A%E8%A7%84%E5%88%99%E7%9A%84%E7%8E%A9%E5%AE%B6/" title="十、做一个精通规则的玩家">十、做一个精通规则的玩家</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/study/" title="分类于 学习笔记">学习笔记</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/study/redis/" title="分类于 Redis">Redis</a></div><span><a href="/computer-science/study/redis/4-Redis-Data-Security-And-Performance/" title="四、redis数据安全及性能保障">四、redis数据安全及性能保障</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/study/" title="分类于 学习笔记">学习笔记</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/study/Python%E3%80%8C%E5%B7%A5%E5%8C%A0%E3%80%8D/" title="分类于 Python「工匠」">Python「工匠」</a></div><span><a href="/computer-science/study/Python%E3%80%8C%E5%B7%A5%E5%8C%A0%E3%80%8D/%E5%85%AB%E3%80%81%E8%A3%85%E9%A5%B0%E5%99%A8%E7%9A%84%E6%8A%80%E5%B7%A7/" title="八、装饰器的技巧">八、装饰器的技巧</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E6%97%A5%E6%9C%AC%E8%AA%9E/" title="分类于 日语">日语</a> <i class="ic i-angle-right"></i> <a href="/categories/%E6%97%A5%E6%9C%AC%E8%AA%9E/study/" title="分类于 学习笔记">学习笔记</a> <i class="ic i-angle-right"></i> <a href="/categories/%E6%97%A5%E6%9C%AC%E8%AA%9E/study/%E6%97%A5%E6%9C%AC%E8%AA%9E%E3%81%AE%E6%96%87%E6%B3%95%E5%88%9D%E7%BA%A7%EF%BC%88%E4%B8%8A%EF%BC%89/" title="分类于 日语语法初级（上）">日语语法初级（上）</a></div><span><a href="/%E6%97%A5%E6%9C%AC%E8%AA%9E/study/%E6%97%A5%E6%9C%AC%E8%AA%9E%E3%81%AE%E6%96%87%E6%B3%95%E5%88%9D%E7%BA%A7%EF%BC%88%E4%B8%8A%EF%BC%89/%E5%9F%BA%E6%9C%AC%E6%A0%87%E7%AD%BE/" title="基本标签">基本标签</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/study/" title="分类于 学习笔记">学习笔记</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/study/redis/" title="分类于 Redis">Redis</a></div><span><a href="/computer-science/study/redis/5-Redis-Building-Program/" title="五、使用redis构建支持程序">五、使用redis构建支持程序</a></span></li></ul></div><div><h2>最新评论</h2><ul class="leancloud-recent-comment"></ul></div></div><div class="status"><div class="copyright">&copy; 2010 – <span itemprop="copyrightYear">2020</span> <span class="with-love"><i class="ic i-sakura rotate"></i> </span><span class="author" itemprop="copyrightHolder">鑫酱(●'◡'●) @ 个人博客</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i> </span><span title="站点总字数">416k 字</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="ic i-coffee"></i> </span><span title="站点阅读时长">6:18</span></div><div class="powered-by">基于 <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"computer-science/study/redis/3-Redis-Command/",favicon:{show:"（●´3｀●）やれやれだぜ",hide:"(´Д｀)大変だ！"},search:{placeholder:"文章搜索",empty:"关于 「 ${query} 」，什么也没搜到",stats:"${time} ms 内找到 ${hits} 条结果"},valine:!0,fancybox:!0,copyright:'复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script><script src="/js/app.js?v=0.2.5"></script></body></html>